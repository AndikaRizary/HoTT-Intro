\chapter{Sequential colimits}

\section{The universal property of sequential colimits}

Type sequences are diagrams of the following form.
\begin{equation*}
\begin{tikzcd}
A_0 \arrow[r,"f_0"] & A_1 \arrow[r,"f_1"] & A_2 \arrow[r,"f_2"] & \cdots.
\end{tikzcd}
\end{equation*}
Their formal specification is as follows.

\begin{defn}
An \define{(increasing) type sequence} $\mathcal{A}$ consists of
\begin{align*}
A & : \N\to\UU \\
f & : \prd{n:\N} A_n\to A_{n+1}. 
\end{align*}
\end{defn}

\begin{defn}
\begin{enumerate}
\item A \define{(sequential) cocone} on a type sequence $\mathcal{A}$ with vertex $B$ consists of
\begin{align*}
h & : \prd{n:\N} A_n\to B \\
H & : \prd{n:\N} f_n\htpy f_{n+1}\circ H_n.
\end{align*}
We write $\mathsf{cocone}(B)$ for the type of cones with vertex $X$.
\item Given a cone $(h,H)$ with vertex $B$ on a type sequence $\mathcal{A}$ we define the map
\begin{equation*}
\mathsf{cocone\usc{}map}(h,H) : (B\to C)\to \mathsf{cocone}(B)
\end{equation*}
given by $f\mapsto (f\circ h,\lam{n}{x}\mathsf{ap}_f(H_n(x)))$. 
\item We say that a cone $(h,H)$ with vertex $B$ is \define{colimiting} if $\mathsf{cocone\usc{}map}(h,H)$ is an equivalence.
\end{enumerate}
\end{defn}

\begin{thm}
Consider a cocone $(h,H)$ with vertex $B$ for a type sequence $\mathcal{A}$. The following are equivalent:
\begin{enumerate}
\item The cocone $(h,H)$ is colimiting.
\item The cocone $(h,H)$ is \define{$\mathcal{A}$-inductive} in the sense that for every type family $P:B\to \UU$, the map
\begin{align*}
\Big(\prd{b:B}P(b)\Big)\to {}& \sm{g:\prd{n:\N}{x:A_n}P(h_n(x))}\\ 
& \qquad \prd{n:\N}{x:A_n} \dpath{P}{H_n(x)}{g_n(x)}{g_{n+1}(f_n(x))}
\end{align*}
given by
\begin{equation*}
s\mapsto (\lam{n}s\circ h_n,\lam{n}{x} \mathsf{apd}_{s}(H_n(x)))
\end{equation*}
has a section.
\end{enumerate}
\end{thm}

\begin{defn}
Consider a type sequence $\mathcal{A}\jdeq (A,f)$. The \define{sequential colimit} of $\mathcal{A}$ is defined as a higher inductive type $A_\infty$ with constructors
\begin{align*}
\mathsf{in} & : \prd{n:\N} A_n\to A_\infty \\
\mathsf{glue} & : \prd{n:\N}{x:A_n} \mathsf{in}_n(x)=\mathsf{in}_{n+1}(f_n(x)).
\end{align*}
The induction principle for $A_\infty$ is that for any type family $P:A_\infty\to\type$, the map

\end{defn}

\section{Descent for sequential colimits}
\begin{thm}
Consider a commuting diagram of the form
\begin{equation*}
\begin{tikzcd}[column sep=small,row sep=small]
A_0 \arrow[rr] \arrow[dd] & & A_1 \arrow[rr] \arrow[dr] \arrow[dd] &[-.9em] &[-.9em] A_2 \arrow[dl] \arrow[dd] & & \cdots \\
& & & X \arrow[from=ulll,crossing over] \arrow[from=urrr,crossing over] \arrow[from=ur,to=urrr] \\
B_0 \arrow[rr] \arrow[drrr] & & B_1 \arrow[rr] \arrow[dr] & & B_2 \arrow[rr] \arrow[dl] & & \cdots \arrow[dlll] \\
& & & Y \arrow[from=uu,crossing over] 
\end{tikzcd}
\end{equation*}
If each of the vertical squares is a pullback square, and $Y$ is the sequential colimit of the type sequence $B_n$, then $X$ is the sequential colimit of the type sequence $A_n$. 
\end{thm}

\section{Propositional truncation}

\begin{exercises}
\item Consider a type sequence
\begin{equation*}
\begin{tikzcd}
A_0 \arrow[r,"f_0"] & A_1 \arrow[r,"f_1"] & A_2 \arrow[r,"f_2"] & \cdots
\end{tikzcd}
\end{equation*}
in which $f_n:A_n\to A_{n+1}$ is weakly constant in the sense that
\begin{equation*}
\prd{x,y:A_n} f_n(x)=f_n(y)
\end{equation*}
Show that $A_\infty$ is a mere proposition.
\item Consider a sequence
\begin{tikzcd}
X_0 \arrow[r] & X_1 \arrow[r] & X_2 \arrow[r] & \cdots
\end{tikzcd}
of \emph{pointed} types and \emph{pointed} maps between them. Show that the sequential colimit is contractible. 
\item Let
\begin{tikzcd}
P_0 \arrow[r] & P_1 \arrow[r] & P_2 \arrow[r] & \cdots
\end{tikzcd}
be a sequence of propositions. Show that
\begin{equation*}
\colim_n(P_n)=\exists_n P_n.
\end{equation*}
\end{exercises}
